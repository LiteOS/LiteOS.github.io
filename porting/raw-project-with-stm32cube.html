<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用 STM32Cube 构建裸机工程 | Huawei LiteOS | 中文网</title>
    <meta name="description" content="轻量级物联网操作系统，物的智能化使能平台">
    
    
    <link rel="preload" href="/assets/css/0.styles.f9a75f71.css" as="style"><link rel="preload" href="/assets/js/app.ebac2994.js" as="script"><link rel="preload" href="/assets/js/77.d0dee7b9.js" as="script"><link rel="prefetch" href="/assets/js/2.797c9c2e.js"><link rel="prefetch" href="/assets/js/3.01133227.js"><link rel="prefetch" href="/assets/js/4.27cfb1b2.js"><link rel="prefetch" href="/assets/js/5.cef4aef4.js"><link rel="prefetch" href="/assets/js/6.c366ba02.js"><link rel="prefetch" href="/assets/js/7.c2d7d248.js"><link rel="prefetch" href="/assets/js/8.2546e495.js"><link rel="prefetch" href="/assets/js/9.98537ce5.js"><link rel="prefetch" href="/assets/js/10.eb963f7e.js"><link rel="prefetch" href="/assets/js/11.12aba51a.js"><link rel="prefetch" href="/assets/js/12.1ec24571.js"><link rel="prefetch" href="/assets/js/13.5d9c7b02.js"><link rel="prefetch" href="/assets/js/14.014bab53.js"><link rel="prefetch" href="/assets/js/15.a2358973.js"><link rel="prefetch" href="/assets/js/16.960a0abf.js"><link rel="prefetch" href="/assets/js/17.d51681d9.js"><link rel="prefetch" href="/assets/js/18.014792be.js"><link rel="prefetch" href="/assets/js/19.386d919b.js"><link rel="prefetch" href="/assets/js/20.21324b6e.js"><link rel="prefetch" href="/assets/js/21.044e2f3a.js"><link rel="prefetch" href="/assets/js/22.de319587.js"><link rel="prefetch" href="/assets/js/23.da439678.js"><link rel="prefetch" href="/assets/js/24.d268f9e4.js"><link rel="prefetch" href="/assets/js/25.3a03103c.js"><link rel="prefetch" href="/assets/js/26.55596063.js"><link rel="prefetch" href="/assets/js/27.5d4e652b.js"><link rel="prefetch" href="/assets/js/28.886f0739.js"><link rel="prefetch" href="/assets/js/29.93a9289d.js"><link rel="prefetch" href="/assets/js/30.635ceddc.js"><link rel="prefetch" href="/assets/js/31.d1630d07.js"><link rel="prefetch" href="/assets/js/32.25f1970c.js"><link rel="prefetch" href="/assets/js/33.e206f5e6.js"><link rel="prefetch" href="/assets/js/34.44758c32.js"><link rel="prefetch" href="/assets/js/35.5070db1b.js"><link rel="prefetch" href="/assets/js/36.a983b706.js"><link rel="prefetch" href="/assets/js/37.cbd77986.js"><link rel="prefetch" href="/assets/js/38.ee97f82c.js"><link rel="prefetch" href="/assets/js/39.6dc5aa9e.js"><link rel="prefetch" href="/assets/js/40.45ef66dd.js"><link rel="prefetch" href="/assets/js/41.021fa28a.js"><link rel="prefetch" href="/assets/js/42.39bd13fd.js"><link rel="prefetch" href="/assets/js/43.b780497d.js"><link rel="prefetch" href="/assets/js/44.20e26ff3.js"><link rel="prefetch" href="/assets/js/45.c8936a65.js"><link rel="prefetch" href="/assets/js/46.0f2ede95.js"><link rel="prefetch" href="/assets/js/47.ccc5309c.js"><link rel="prefetch" href="/assets/js/48.e2442e43.js"><link rel="prefetch" href="/assets/js/49.76333989.js"><link rel="prefetch" href="/assets/js/50.e087da94.js"><link rel="prefetch" href="/assets/js/51.5ef45dae.js"><link rel="prefetch" href="/assets/js/52.22e02843.js"><link rel="prefetch" href="/assets/js/53.e24c11fc.js"><link rel="prefetch" href="/assets/js/54.5e09bf84.js"><link rel="prefetch" href="/assets/js/55.9938fbaf.js"><link rel="prefetch" href="/assets/js/56.05523578.js"><link rel="prefetch" href="/assets/js/57.322b9e88.js"><link rel="prefetch" href="/assets/js/58.000d81f9.js"><link rel="prefetch" href="/assets/js/59.89a5fa70.js"><link rel="prefetch" href="/assets/js/60.6b0d3d88.js"><link rel="prefetch" href="/assets/js/61.63a331c4.js"><link rel="prefetch" href="/assets/js/62.f14885f4.js"><link rel="prefetch" href="/assets/js/63.67993815.js"><link rel="prefetch" href="/assets/js/64.14e7533b.js"><link rel="prefetch" href="/assets/js/65.b0c71517.js"><link rel="prefetch" href="/assets/js/66.fe8107cb.js"><link rel="prefetch" href="/assets/js/67.4527fe47.js"><link rel="prefetch" href="/assets/js/68.f1a2a401.js"><link rel="prefetch" href="/assets/js/69.ed9be120.js"><link rel="prefetch" href="/assets/js/70.462bfed2.js"><link rel="prefetch" href="/assets/js/71.b588fa24.js"><link rel="prefetch" href="/assets/js/72.195453c7.js"><link rel="prefetch" href="/assets/js/73.7a1af3a5.js"><link rel="prefetch" href="/assets/js/74.35f71ea4.js"><link rel="prefetch" href="/assets/js/75.a1037541.js"><link rel="prefetch" href="/assets/js/76.6be57bd3.js"><link rel="prefetch" href="/assets/js/78.dbf3d548.js"><link rel="prefetch" href="/assets/js/79.b123fc05.js"><link rel="prefetch" href="/assets/js/80.d59ebe58.js"><link rel="prefetch" href="/assets/js/81.e3276f9e.js"><link rel="prefetch" href="/assets/js/82.f660e1fe.js"><link rel="prefetch" href="/assets/js/83.ee0abb53.js"><link rel="prefetch" href="/assets/js/84.5fe24ab9.js"><link rel="prefetch" href="/assets/js/85.4da42e8f.js"><link rel="prefetch" href="/assets/js/86.7c723df1.js"><link rel="prefetch" href="/assets/js/87.30c4a2f3.js"><link rel="prefetch" href="/assets/js/88.2b1b22d9.js"><link rel="prefetch" href="/assets/js/89.1fcf0f89.js"><link rel="prefetch" href="/assets/js/90.4320f5fc.js"><link rel="prefetch" href="/assets/js/91.77b640f4.js"><link rel="prefetch" href="/assets/js/92.56d1ee88.js"><link rel="prefetch" href="/assets/js/93.49b71613.js"><link rel="prefetch" href="/assets/js/94.c3dbe4a1.js"><link rel="prefetch" href="/assets/js/95.9ca750fb.js"><link rel="prefetch" href="/assets/js/96.8aa9dab3.js"><link rel="prefetch" href="/assets/js/97.b4790e69.js"><link rel="prefetch" href="/assets/js/98.fe6c897d.js"><link rel="prefetch" href="/assets/js/99.660d2a6d.js"><link rel="prefetch" href="/assets/js/100.d1218927.js"><link rel="prefetch" href="/assets/js/101.e58838ba.js"><link rel="prefetch" href="/assets/js/102.1d6d31d5.js"><link rel="prefetch" href="/assets/js/103.74b3ab08.js"><link rel="prefetch" href="/assets/js/104.214b69a5.js"><link rel="prefetch" href="/assets/js/105.6d22d164.js"><link rel="prefetch" href="/assets/js/106.8b847a67.js"><link rel="prefetch" href="/assets/js/107.57708600.js"><link rel="prefetch" href="/assets/js/108.556ca3c9.js"><link rel="prefetch" href="/assets/js/109.defe299a.js"><link rel="prefetch" href="/assets/js/110.607a218f.js"><link rel="prefetch" href="/assets/js/111.c4c2108c.js"><link rel="prefetch" href="/assets/js/112.6f03f604.js"><link rel="prefetch" href="/assets/js/113.8531d6b7.js"><link rel="prefetch" href="/assets/js/114.b5b8cca1.js"><link rel="prefetch" href="/assets/js/115.be7097d0.js"><link rel="prefetch" href="/assets/js/116.8d1fc7fa.js"><link rel="prefetch" href="/assets/js/117.d2275427.js"><link rel="prefetch" href="/assets/js/118.82000eeb.js"><link rel="prefetch" href="/assets/js/119.2d2132ee.js"><link rel="prefetch" href="/assets/js/120.700e8617.js"><link rel="prefetch" href="/assets/js/121.fdea1580.js"><link rel="prefetch" href="/assets/js/122.ee959c5f.js"><link rel="prefetch" href="/assets/js/123.cc4eefd6.js"><link rel="prefetch" href="/assets/js/124.f7a23609.js"><link rel="prefetch" href="/assets/js/125.c55f399b.js"><link rel="prefetch" href="/assets/js/126.b22b5fa2.js"><link rel="prefetch" href="/assets/js/127.40982843.js"><link rel="prefetch" href="/assets/js/128.8573152a.js"><link rel="prefetch" href="/assets/js/129.47625aa8.js"><link rel="prefetch" href="/assets/js/130.01a6dc14.js"><link rel="prefetch" href="/assets/js/131.dab15add.js"><link rel="prefetch" href="/assets/js/132.3bd3d270.js"><link rel="prefetch" href="/assets/js/133.a28159ea.js"><link rel="prefetch" href="/assets/js/134.9036c3fe.js"><link rel="prefetch" href="/assets/js/135.57783cba.js"><link rel="prefetch" href="/assets/js/136.0f35fdea.js"><link rel="prefetch" href="/assets/js/137.ef9ff270.js"><link rel="prefetch" href="/assets/js/138.7251e16c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.6e0abf1f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f9a75f71.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Huawei LiteOS | 中文网</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">入门</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/quick-start/intro/" class="nav-link">必知必会</a></li><li class="dropdown-item"><!----> <a href="/quick-start/demo/" class="nav-link">轻松上手</a></li><li class="dropdown-item"><!----> <a href="/quick-start/contribute/" class="nav-link">参与贡献</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kernel/" class="nav-link">LiteOS 内核详解</a></li><li class="dropdown-item"><!----> <a href="/sdk/" class="nav-link">LiteOS SDK详解</a></li><li class="dropdown-item"><!----> <a href="/porting/" class="nav-link router-link-active">LiteOS 移植手册</a></li><li class="dropdown-item"><!----> <a href="http://liteos.github.io/api-reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiteOS API 参考
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">教程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tutorials/kernel/" class="nav-link">LiteOS 内核使用指南</a></li><li class="dropdown-item"><!----> <a href="/tutorials/scene/" class="nav-link">NB-IoT 开发板场景化实操</a></li><li class="dropdown-item"><!----> <a href="/step-by-step/nb-iot/" class="nav-link">NB-IoT OneButton 端到端开发</a></li><li class="dropdown-item"><!----> <a href="https://developer.huawei.com/ict/cn/edu-online" target="_blank" rel="noopener noreferrer" class="nav-link external">
  朱老师 NB-IoT 视频课程
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">活动</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://developer.huawei.com/ict/cn/hdc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  2018 华为开发者大赛
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/porting/raw-project-with-stm32cube.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/LiteOS/LiteOS_Documents" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">入门</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/quick-start/intro/" class="nav-link">必知必会</a></li><li class="dropdown-item"><!----> <a href="/quick-start/demo/" class="nav-link">轻松上手</a></li><li class="dropdown-item"><!----> <a href="/quick-start/contribute/" class="nav-link">参与贡献</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kernel/" class="nav-link">LiteOS 内核详解</a></li><li class="dropdown-item"><!----> <a href="/sdk/" class="nav-link">LiteOS SDK详解</a></li><li class="dropdown-item"><!----> <a href="/porting/" class="nav-link router-link-active">LiteOS 移植手册</a></li><li class="dropdown-item"><!----> <a href="http://liteos.github.io/api-reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiteOS API 参考
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">教程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tutorials/kernel/" class="nav-link">LiteOS 内核使用指南</a></li><li class="dropdown-item"><!----> <a href="/tutorials/scene/" class="nav-link">NB-IoT 开发板场景化实操</a></li><li class="dropdown-item"><!----> <a href="/step-by-step/nb-iot/" class="nav-link">NB-IoT OneButton 端到端开发</a></li><li class="dropdown-item"><!----> <a href="https://developer.huawei.com/ict/cn/edu-online" target="_blank" rel="noopener noreferrer" class="nav-link external">
  朱老师 NB-IoT 视频课程
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">活动</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://developer.huawei.com/ict/cn/hdc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  2018 华为开发者大赛
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/porting/raw-project-with-stm32cube.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/LiteOS/LiteOS_Documents" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>准备工作</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/porting/" class="sidebar-link">移植前说明</a></li><li><a href="/porting/evb-and-tools.html" class="sidebar-link">程序下载与调试工具</a></li><li><a href="/porting/raw-project-with-stm32cube.html" class="active sidebar-link">使用 STM32Cube 构建裸机工程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/porting/raw-project-with-stm32cube.html#安装-stm32cube-并下载芯片对应的软件支持包" class="sidebar-link">安装 STM32Cube 并下载芯片对应的软件支持包</a></li><li class="sidebar-sub-header"><a href="/porting/raw-project-with-stm32cube.html#使用-stm32cubemx-创建适配开发板的裸机工程" class="sidebar-link">使用 STM32CubeMX 创建适配开发板的裸机工程</a></li></ul></li><li><a href="/porting/liteos-source-code.html" class="sidebar-link">Huawei LiteOS 源码下载</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>OS 移植</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/porting/stm32-keil.html" class="sidebar-link">STM32 系列（MDK-ARM V5）</a></li><li><a href="/porting/stm32-iar.html" class="sidebar-link">STM32 系列（EWARM）</a></li><li><a href="/porting/stm32-sw4stm32.html" class="sidebar-link">STM32 系列（SW4STM32）</a></li><li><a href="/porting/stm32-makefile.html" class="sidebar-link">STM32 系列（Makefile）</a></li><li><a href="/porting/faq.html" class="sidebar-link">移植中的常见问题</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>移植后验证</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/porting/inspect-example.html" class="sidebar-link">验证实验设计</a></li><li><a href="/porting/inspect-results.html" class="sidebar-link">验证测试结果</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>附录一：开发工具安装手册</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>附录二：OS_CONFIG 配置详解</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="使用-stm32cube-构建裸机工程"><a href="#使用-stm32cube-构建裸机工程" aria-hidden="true" class="header-anchor">#</a> 使用 STM32Cube 构建裸机工程</h1> <p>最近几年 ST 官方都在大力推行 STM32CubeMX 图形化开发，鼓励大家从标准库转到 HAL 库上来。随着 STM32Cube 快速迭代更新，目前已经支持 STM32 全系列产品，配置和使用都非常方便。因此我们在本教程中用 STM32Cube 作为裸机工程的构建工具，一步步指导开发者完成 Huawei LiteOS 的内核移植。</p> <p><img src="/assets/img/stm32cube.9e74bcc5.png" alt></p> <h2 id="安装-stm32cube-并下载芯片对应的软件支持包"><a href="#安装-stm32cube-并下载芯片对应的软件支持包" aria-hidden="true" class="header-anchor">#</a> 安装 STM32Cube 并下载芯片对应的软件支持包</h2> <p>STM32Cube 是 ST 提供的一套性能强大的免费开发工具和嵌入式软件模块，能够让开发人员在 STM32 平台上快速、轻松地开发应用。它包含两个关键部分：</p> <ul><li><strong>图形配置工具</strong>（STM32CubeMX）—— 允许用户通过图形化向导来生成 C 语言工程。</li> <li><strong>嵌入式软件包</strong>（STM32Cube 库）—— 包含完整的 HAL 库（STM32 硬件抽象层 API），配套的中间件（包括 RTOS，USB，TCP/IP 和图形），以及一系列完整的例程。</li></ul> <h3 id="你应当知道的事"><a href="#你应当知道的事" aria-hidden="true" class="header-anchor">#</a> 你应当知道的事</h3> <p>ST 先后提供了两套固件库：<strong>标准库</strong> 和 <strong>HAL 库</strong>。STM32 芯片面市之初只提供了丰富全面的标准库，大大方便了用户程序开发，为广大开发板所推荐。目前网络学习资料和源码，绝大多数都是采用的标准库。</p> <p>大约到 2014 年左右，ST 在标准库的基础上又推出了 HAL 库。实际上，HAL 库和标准库本质上是一样的，都是提供底层硬件操作 API，而且在使用上也大同小异。最近两年新出的 STM32 芯片，ST 甚至只提供 HAL 库。我们即将使用的 STM32Cube 工具生成的项目也只包含 HAL 库。</p> <p>本教程读者会有相当一部分都有过基于标准库的开发经验，对于使用 HAL 库可能会存在排斥。说老实话，大家不必纠结到底是学习 HAL 库还是标准库，无论使用哪种库，只要理解了 STM32 本质，任何库都是一种工具，使用起来都非常方便。</p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>我们不会花大量篇幅来介绍 STM32 和 HAL 库的使用，其相关知识的学习还需要大家去参考更专业的教程。对于 STM32Cube 工具的使用，我们也尽量做到点到为止。</p></div> <h3 id="下载并安装-stm32cube"><a href="#下载并安装-stm32cube" aria-hidden="true" class="header-anchor">#</a> 下载并安装 STM32Cube</h3> <ol><li><p>由于 STM32CubeMX 依赖 Java 运行环境，如果您的电脑上没有 Java 1.7 以上的运行环境，请先到 <a href="http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 下载到最新版本 JRE。</p></li> <li><p>STM32Cube 则可以在 ST 官网 <a href="https://www.st.com/en/development-tools/stm32cubemx.html" target="_blank" rel="noopener noreferrer">https://www.st.com/stm32cube<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 免费下载；</p></li></ol> <div class="warning custom-block"><p class="custom-block-title">警告</p> <p>由于 STM32CubeMX 软件版本更新非常频繁，其新版本创建的工程无法被旧版本软件打开，我们这里就不提供网盘下载，建议大家尽量下载最新版本。</p></div> <ol start="3"><li>我们这里以 MDK5.25 作为开发环境，请提前下载并安装。</li></ol> <p>总的来说，STM32Cube 安装起来相当简单，只需要一路 <code>Next</code> 即可完成安装。</p> <p><img src="/assets/img/stm32cube-pre-install.fabf973d.png" alt></p> <p><img src="/assets/img/stm32cube-install-done.2e8dbf2c.png" alt></p> <p>接下来我们先启动 STM32CubeMX，看看如何创建一个 STM32Cube工程。</p> <p><img src="/assets/img/stm32cube-start.8ddaaf44.png" alt></p> <p>在创建工程之前，还需要先安装开发板 MCU 芯片对应的软件包，如下图所示，点击 <code>Help</code> -&gt;  <code>Manage embedded software packages</code>，打开软件包管理界面。</p> <p><img src="/assets/img/stm32cube-help-package.6df34deb.png" alt></p> <p><img src="/assets/img/stm32cube-package-manager.849bb6cd.png" alt></p> <p>目前有 <strong>离线</strong> 和 <strong>在线</strong> 两种方式进行安装：</p> <p><strong>1. 离线安装</strong></p> <p>需要访问 <a href="https://www.st.com/en/development-tools/stm32cubemx.html" target="_blank" rel="noopener noreferrer">https://www.st.com/stm32cube<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 下载对应的离线软件包，然后点击 <code>From Local ...</code>，选取对应的离线软件包即可完成。</p> <p><img src="/assets/img/stm32cube-package-offline.d997c00e.png" alt></p> <p><img src="/assets/img/stm32cube-package-local-install.1c18b468.png" alt></p> <p><strong>2. 在线安装</strong></p> <p>如果您的网络很稳定，也可以直接选取需要移植的开发板 MCU 对应的芯片系列，点击 <code>Install Now</code>。STM32CubeMX 会自动下载对应的软件包并完成安装。</p> <p><img src="/assets/img/stm32cube-package-online.a78ee6a3.png" alt></p> <h2 id="使用-stm32cubemx-创建适配开发板的裸机工程"><a href="#使用-stm32cubemx-创建适配开发板的裸机工程" aria-hidden="true" class="header-anchor">#</a> 使用 STM32CubeMX 创建适配开发板的裸机工程</h2> <p>要移植 OS，肯定需要一个基础工程，基础工程则是越简单越好。下面我们一步步创建裸机工程。</p> <h3 id="新建工程"><a href="#新建工程" aria-hidden="true" class="header-anchor">#</a> 新建工程</h3> <ol><li>根据你开发板使用的 CPU 型号来选择，我们这里输入 <code>STM32F103ZE</code>，选择具体型号（封装不同）。</li></ol> <p><img src="/assets/img/stm32cube-mcu-selector.1337b8c5.png" alt></p> <ol start="2"><li>进入工程后打开 RCC 选项，使能 High Speed Clock (HSE) <code>Crystal/Ceramic Resonator</code>，即使用外部晶振作为 HSE 的时钟源。</li></ol> <p><img src="/assets/img/stm32cube-pinout-rcc.c3b92d58.png" alt></p> <ol start="3"><li>使能 UART1，选择 <code>Asynchronous</code>。</li></ol> <p><img src="/assets/img/stm32cube-pinout-usart1.53a44c50.png" alt></p> <ol start="4"><li>从开发板原理图，配置 2 个 LED ，分别对应 <strong>PB5</strong> 和 <strong>PE5</strong> IO。</li></ol> <p><img src="/assets/img/atk-warship-datasheet.e01b0303.png" alt></p> <div class="warning custom-block"><p class="custom-block-title">警告</p> <p>如果大家正在操作的开发板并不是正点原子的战舰V3，那么对应的 LED IO 很大可能不是 PB5 和 PE5。这需要大家对照的开发板原理图，查找对应的 LED IO。</p> <p>通常开发板会预留 2 个以上 LED，为了我们后续验证实验顺利进行，建议启用 2 个 LED IO。</p></div> <p>找到对应的 IO 后，则将其设置为 <code>GPIO_Output</code>，然后右键选择 <code>Enter user label</code> 为 <code>PB5</code> 命名为 <code>LED0</code></p> <p><img src="/assets/img/stm32cube-select-gpio-output.545f9431.png" alt></p> <p><img src="data:image/png;base64,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" alt></p> <p>同样的方法将 <code>PE5</code> 配置好，并命名为 <code>LED1</code>。</p> <p>最终配置完成效果如下：</p> <p><img src="/assets/img/stm32cube-setting-led.c0600175.png" alt></p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>由于 STM32CubeMX 默认配置就可以让裸机工程正常工作，我们这里不想介绍得过多。</p> <p>如果读者需要对 <strong>时钟</strong>，<strong>串口</strong>，<strong>GPIO</strong> 等外设进行进一步配置，可以参考下图进行修改。</p></div> <p><img src="/assets/img/stm32cube-setting-clock.51d7f039.png" alt></p> <p><img src="/assets/img/stm32cube-setting-usart1.3a15ea03.png" alt></p> <p><img src="/assets/img/stm32cube-setting-led1.a84b7fd0.png" alt></p> <h3 id="配置工程属性，生成代码"><a href="#配置工程属性，生成代码" aria-hidden="true" class="header-anchor">#</a> 配置工程属性，生成代码</h3> <p>我们这里选取 <strong>MDK-ARM V5</strong> 作为开发环境，配置好工程名和代码导出路径。</p> <p><img src="/assets/img/stm32cube-settings-toolchain-mdk.ca31aed0.png" alt></p> <p>为便于外设相关代码维护，建议将下面的选项勾中。</p> <p><img src="/assets/img/stm32cube-settings-code-generator.91c991e1.png" alt></p> <div class="danger custom-block"><p class="custom-block-title">重要</p> <p>导出代码之前，请务必在 NVIC 配置选项中将 <code>Pendable request for system service</code> 和 <code>Time base: System tick timer</code> 默认勾选取消。</p> <p><img src="/assets/img/stm32cube-nvic-no-systick.f4864c0c.png" alt></p></div> <p>最后选择菜单栏上 <code>Project</code> -&gt; <code>Generate Code</code> 或点击下图齿轮按钮，STM32Cube 会自动导出裸机工程。</p> <p><img src="/assets/img/stm32cube-generate-source-code.371d920e.png" alt></p> <p><img src="/assets/img/stm32cube-generate-open-project.840a319d.png" alt></p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>为了让导出的裸机工程适配 LiteOS 目录树结构，建议将其放置在 <code>\LiteOS\target</code> 目录中。</p> <p><img src="/assets/img/raw-project-output-directory.f947df36.png" alt></p></div> <p>至此，裸机工程就成功创建了。</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/LiteOS/LiteOS_Documents/edit/master/docs/porting/raw-project-with-stm32cube.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2018-7-30 14:19:48</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/porting/evb-and-tools.html" class="prev">
          程序下载与调试工具
        </a></span> <span class="next"><a href="/porting/liteos-source-code.html">
          Huawei LiteOS 源码下载
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/77.d0dee7b9.js" defer></script><script src="/assets/js/app.ebac2994.js" defer></script>
  </body>
</html>
