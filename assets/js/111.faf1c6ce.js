(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{164:function(t,a){t.exports="data:image/gif;base64,R0lGODlhGwAWAKUAAPz+/Nze3LS2tHx+fFxaXGRiZERCRBwaHDw6PMTGxAQGBDQ2NKSmpJyenLy+vOTm5HRydDQyNAQCBCwuLCQiJKyurExKTBQSFGRmZFRSVBweHIyKjFxeXNTS1ERGRIyOjOzu7PT29Hx6fCQmJBQWFJSWlAwKDISGhMzOzNTW1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAAALAAAAAAbABYAAAanQIBwSCwaj8ikcslsOpEQiVRiOgFQlKkEkUqCJgViSDQyBIgJUglJ4QyMh45R4/kcJYN3kXLeb8JGeHpEfEYUf3d5hn2EiIGKe4xDh4BFgouGjpaQhJJClImDk54AoI+in6SmmxgDBQYZAwIaG3l5DAGrRBITFAMNDhUDFhcEtgMEFAoYlUQKCwMMDbYODwnTxxARzUMBAsgFtgYHCOHHrwlP6uvs7UEAOw=="},443:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL0AAADsCAIAAACuZzA1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAZlSURBVHhe7d2/ixNpHMfxKU63ujJ2lruVVreVnYYUVstwCMLhWQgpbAI2sbJNe0269PkbArKNpBAOTjiwOC6ECwfHsiwoNmuVeybzZDI/8n2SfMo87xePkkxmLb7z5slscNlkCRwu+fLt60+/PL7XPmOx9lmnF+eL//5N3B/Xja8I2CV982L66SPd4DB0AwXdQEE3UNANFHQDBd1AQTdQ0A0UdAMF3UBBN1DQDRR0AwXdQEE3UNANFHQDBd1AQTdQ0A0UdAMF3UARVTeXvfZZq92f+KfeZOAOpsOFf5qflv90WenkzcHy6k2t4/7LjlV03TQuah7TupvFqNM+64znqyfL5bRfTcpx59eO5Kzjxym2btLeIG0NLv0Bx5Ux6BeX3O09m2hy7oTuaOafOHSTia6b4XTUKXXgQlm916wuebbZNK99LQi6ycTXzWI+7BYX2B1xdzDrS17fWrzqJkQ3mQi7KXWQvUm59yy6OViM3axzKYKgm4NF2U32wL09FW9Y6+Pm/U35WzCrD+v4cYqzm2wL6Y2LG+TK8WJr8Y/dJlT5yIduMpF2Mxun9zaf05QvuXtcHHcbUvZ5T1HSCt1kIu2m+pZUu+Q+l3x1umnj0+StfdANqtzmVN1yQDeQ0A0UdAMF3UBBN1DQDRR0AwXdQEE3UNANFHQDBd1AQTdQ0A0UdAMF3UBBN1DQDRR0AwXdQEE3UNANFHQDxaabB88euUes2pp8eF87wnLrSffC/Z3cfr99+e61i4hVW3dO7taOsNx6/vbV1c114ncfNCQJwzExGhPdBDAaE90EMBoT3QQwGhPdBDAaE90EMBoT3QQwGhPdBDAaE90EMBoT3QQwGhPdBDAaE90EMBoT3QQwGhPdBDAaE90EMBoT3QQwGhPdBDAaE90EMBoT3QQwGhPdBDAaE90EMBoT3QQkX759Pb04L35ZF6tYP/x4UjvCcuv+04d//TPj5zVxmJSf84WAbqCgGyjoBgq6gYJuoKAbKOgGCrqBgm6goBso6AYKuoGCbqCgGyjoBgq6gYJuoKAbKOgGisi7uew1/qe+W71p/lI6XOSnVczGafXMGLHf5JqVbO/GRdPqjmb+WZZdnOnQTW7PbubDbiWUakYRoZvcAd10xnP/zFmMOu3+xD+JCN3k9uxmuZz28zubSj3xoZvc3t1k3Ev+vrgV5Wbj0E3uoG7WVntPnOnQTW6/brbczdTvlCNBN7k99xt3sFYJ3dDN7m5W33iXjq+e8j4Vr63d+Jtffwu8/pym/HlxnB/eOHQDBd1AQTdQ0A0UdAMF3UBBN1DQDRR0AwXdQEE3UNANFHQDBd1AQTdQ0A0UdAMF3UBBN1DQDRR0AwXdQEE3UPhu+P3h1uL3h29d/veH+4rQkCQMx8RoTHQTwGhMdBPAaEx0E8BoTHQTwGhMdBPAaEx0E8BoTHQTwGhMdBPAaEx0E8BoTHQTwGhMdBPAaEx0E8BoTHQTwGhMdBPAaEx0E8BoTHQTwGhMdBPAaEx0E8BoTHQTwGhMdBPAaEx0E5Dcfr99+e51+uYFq7bunNytHWG59fztq6ub6+zn7h48ezT99JFVW5MP72tHWG496V64v/l5TRzGbTl0g4PRDRR0AwXdQEE3UNANFHQDBd1AQTdQ0A0UdAMF3UBBN1DQDRR0AwXdQEE3UNANFHQDBd1AQTdQ0A0UdAMF3UBBN1DQDRQxdHPZa/x6SLd6U//ycjHqNA82vqrVTocL/1om+6pff94c3HX+cYlqv3GXtnEtp/3SBc6u/TqdxsmVM5ezcdoa/FY6Z8f5RybybubDbnmPWV3s7miWPdpx8mTgHpfP2eMfPyJxd5O91/Qn/kmuOCfcQf5q+Zzw+ccm7m42u0vTtpOLyPwXBrspn3906CbQjXmf625uOuN59R8MnX986Gbv/WajeAOqdXPModRwf1N7K9naRNXmq+gmzm6at67bm6hyu9TgcvWIbiLtJr97LV/7s9WNS/54ewfuO/Bt59DN0TIubbbH+JvZdRCO1YHVCt0Au9ANFHQDBd1AQTdQ0A0UdAMF3UBBN1DQDRR0AwXdQEE3UNANFHQDBd1AQTdQ0A0UdAMF3UBBN1DQDRR0AwXdQEE3UNANFHQDBd1AQTdQ0A0Uvpurm+v7Tx+6JyzWPuv04vz3z38krqA///7sCmKx9lkumuVy+T/ADcuUh4NcjwAAAABJRU5ErkJggg=="},444:function(t,a,r){t.exports=r.p+"assets/img/zh-cn_image_0150525918.340494e6.png"},445:function(t,a,r){t.exports=r.p+"assets/img/zh-cn_image_0150525920.f9016bab.png"},446:function(t,a,r){t.exports=r.p+"assets/img/zh-cn_image_0150516759.55170d23.png"},447:function(t,a,r){t.exports=r.p+"assets/img/zh-cn_image_0150495735.a34302bb.png"},448:function(t,a,r){t.exports=r.p+"assets/img/zh-cn_image_0150495737.0ccf9e92.png"},449:function(t,a,r){t.exports=r.p+"assets/img/zh-cn_image_0150495739.31f28552.png"},450:function(t,a,r){t.exports=r.p+"assets/img/zh-cn_image_0150495741.c2af6b73.png"},922:function(t,a,r){"use strict";r.r(a);var s=[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"端云互通组件-mqtt-开发指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#端云互通组件-mqtt-开发指南","aria-hidden":"true"}},[this._v("#")]),this._v(" 端云互通组件-MQTT 开发指南")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"liteos端云互通组件-mqtt开发介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#liteos端云互通组件-mqtt开发介绍","aria-hidden":"true"}},[this._v("#")]),this._v(" LiteOS端云互通组件-MQTT开发介绍")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:r(443),alt:""}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("一机一密模式")]),this._v("，即一个设备在平台申请一个密码，流程图如下所示：")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:r(444),alt:""}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("一型一密模式")]),this._v("，即一种产品在平台申请一个密码，产品的设备唯一标识nodeid由设备厂家分配，设备的密码由设备和平台动态协商，流程图如下所示：")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:r(445),alt:""}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("ol",[a("li",[this._v("支持一机一密即静态连接，及一型一密即动态连接。")]),this._v(" "),a("li",[this._v("支持数据上报到IoT平台。")]),this._v(" "),a("li",[this._v("支持接收执行IoT平台命令。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:r(446),alt:""}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"设备接入iot平台集成开发流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设备接入iot平台集成开发流程","aria-hidden":"true"}},[this._v("#")]),this._v(" 设备接入IoT平台集成开发流程")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("平台侧环境准备")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("开发者Portal的访问地址/账号/密码，需要向OceanConnect IoT平台申请")]),this._v(" "),a("li",[this._v("设备对接地址/端口号")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("端侧环境准备")]),this._v("：")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("集成开发工具:\n"),a("ul",[a("li",[this._v("MDK 5.18版本或者以上版本，从MDK官方网站下载。")]),this._v(" "),a("li",[this._v("MDK依赖的pack包")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:r(447),alt:""}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:r(448),alt:""}})])},function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("p",[r("a",{attrs:{name:"table48398424"}}),t._v(" "),r("table",[r("tbody",[r("tr",{attrs:{id:"row57801875"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"38.48%"}},[r("p",{attrs:{id:"p51440330"}},[r("a",{attrs:{name:"p51440330"}}),r("a",{attrs:{name:"p51440330"}}),t._v("目录")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"61.519999999999996%"}},[r("p",{attrs:{id:"p5917164"}},[r("a",{attrs:{name:"p5917164"}}),r("a",{attrs:{name:"p5917164"}}),t._v("描述")])])]),t._v(" "),r("tr",{attrs:{id:"row53254482"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"38.48%"}},[r("p",{attrs:{id:"p18645762"}},[r("a",{attrs:{name:"p18645762"}}),r("a",{attrs:{name:"p18645762"}}),t._v("components/connectivity/mqtt")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"61.519999999999996%"}},[r("p",{attrs:{id:"p33911763"}},[r("a",{attrs:{name:"p33911763"}}),r("a",{attrs:{name:"p33911763"}}),t._v("paho.mqtt.enbedded-c开源组件及适配")])])]),t._v(" "),r("tr",{attrs:{id:"row36770415"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"38.48%"}},[r("p",{attrs:{id:"p25613652"}},[r("a",{attrs:{name:"p25613652"}}),r("a",{attrs:{name:"p25613652"}}),t._v("components/connectivity/agent_tiny/atiny_mqtt")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"61.519999999999996%"}},[r("p",{attrs:{id:"p61439917"}},[r("a",{attrs:{name:"p61439917"}}),r("a",{attrs:{name:"p61439917"}}),t._v("对接IoT平台的实现")])])])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:r(449),alt:""}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("img",{attrs:{src:r(450),alt:""}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v('{\n"msgType":      "deviceReq",\n"hasMore":      0,\n"data": [{\n"serviceId":    "serviceIdValue",\n"data": {\n"defineData": "defineValue"\n},\n"eventTime":    "20161219T114920Z"\n}]\n}\n')])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v('{\n"msgType":"cloudReq",\n"serviceId":"serviceIdValue",\n"paras":{\n"paraName":"paraValue"\n},\n"cmd":"cmdValue",\n"hasMore":0,\n"mid":0\n}\n')])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v('{\n"msgType":"deviceRsp",\n"mid":0,\n"errcode":0,\n"hasMore":0,\n"body":{\n"bodyParaName":"bodyParaValue"\n}\n}\n')])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[a("img",{attrs:{src:r(164),alt:""}}),this._v(" "),a("strong",[this._v("说明：")]),a("br"),this._v("\nHuawei LiteOS开源社区地址：https://github.com/LiteOS/LiteOS。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"api参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api参考","aria-hidden":"true"}},[this._v("#")]),this._v(" API参考")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("atiny_mqtt_init")])])},function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("p",[r("a",{attrs:{name:"table62894494"}}),t._v(" "),r("table",[r("tbody",[r("tr",{attrs:{id:"row18996311"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p62306224"}},[r("a",{attrs:{name:"p62306224"}}),r("a",{attrs:{name:"p62306224"}}),t._v("接口1")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p13639418"}},[r("a",{attrs:{name:"p13639418"}}),r("a",{attrs:{name:"p13639418"}}),t._v("int  atiny_mqtt_init(const mqtt_param_s* atiny_params, mqtt_client_s** phandle)")])])]),t._v(" "),r("tr",{attrs:{id:"row55645905"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p11024455"}},[r("a",{attrs:{name:"p11024455"}}),r("a",{attrs:{name:"p11024455"}}),t._v("功能")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p20565633"}},[r("a",{attrs:{name:"p20565633"}}),r("a",{attrs:{name:"p20565633"}}),t._v("初始化MQTT模块，配置必备信息。")])])]),t._v(" "),r("tr",{attrs:{id:"row50872971"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p27069991"}},[r("a",{attrs:{name:"p27069991"}}),r("a",{attrs:{name:"p27069991"}}),t._v("入参")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p45185659"}},[r("a",{attrs:{name:"p45185659"}}),r("a",{attrs:{name:"p45185659"}}),t._v("atiny_params：MQTT服务器信息、传输层安全信息、用户交互命令钩子。")])])]),t._v(" "),r("tr",{attrs:{id:"row4017754"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p57002678"}},[r("a",{attrs:{name:"p57002678"}}),r("a",{attrs:{name:"p57002678"}}),t._v("出参")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p53814239"}},[r("a",{attrs:{name:"p53814239"}}),r("a",{attrs:{name:"p53814239"}}),t._v("Phandle：MQTT客户端句柄。")])])]),t._v(" "),r("tr",{attrs:{id:"row14566108"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p39004066"}},[r("a",{attrs:{name:"p39004066"}}),r("a",{attrs:{name:"p39004066"}}),t._v("返回值")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p5212777"}},[r("a",{attrs:{name:"p5212777"}}),r("a",{attrs:{name:"p5212777"}}),t._v("ATINY_OK表示成功；否则错误码。")])])])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("atiny_mqtt_bind")])])},function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("p",[r("a",{attrs:{name:"table61289235"}}),t._v(" "),r("table",[r("tbody",[r("tr",{attrs:{id:"row29724369"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p58863658"}},[r("a",{attrs:{name:"p58863658"}}),r("a",{attrs:{name:"p58863658"}}),t._v("接口2")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p3226955"}},[r("a",{attrs:{name:"p3226955"}}),r("a",{attrs:{name:"p3226955"}}),t._v("int atiny_mqtt_bind(const mqtt_device_info_s* device_info, mqtt_client_s* phandle)")])])]),t._v(" "),r("tr",{attrs:{id:"row29042598"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p3640263"}},[r("a",{attrs:{name:"p3640263"}}),r("a",{attrs:{name:"p3640263"}}),t._v("功能")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p26425925"}},[r("a",{attrs:{name:"p26425925"}}),r("a",{attrs:{name:"p26425925"}}),t._v("绑定MQTT设备，并占用该任务一直运行。")])])]),t._v(" "),r("tr",{attrs:{id:"row36506738"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p4255814"}},[r("a",{attrs:{name:"p4255814"}}),r("a",{attrs:{name:"p4255814"}}),t._v("入参")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p9176617"}},[r("a",{attrs:{name:"p9176617"}}),r("a",{attrs:{name:"p9176617"}}),t._v("device_info：设备配置参数，即静态、动态连接相关参数，连接校验方式，编码方式。")])])]),t._v(" "),r("tr",{attrs:{id:"row15480697"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p45976953"}},[r("a",{attrs:{name:"p45976953"}}),r("a",{attrs:{name:"p45976953"}}),t._v("出参")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p33145693"}},[r("a",{attrs:{name:"p33145693"}}),r("a",{attrs:{name:"p33145693"}}),t._v("phandle：MQTT客户端句柄。")])])]),t._v(" "),r("tr",{attrs:{id:"row29875784"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p4019454"}},[r("a",{attrs:{name:"p4019454"}}),r("a",{attrs:{name:"p4019454"}}),t._v("返回值")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p57140364"}},[r("a",{attrs:{name:"p57140364"}}),r("a",{attrs:{name:"p57140364"}}),t._v("返回错误码或者不返回。")])])])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("atiny_mqtt_data_send")])])},function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("p",[r("a",{attrs:{name:"table65481017"}}),t._v(" "),r("table",[r("tbody",[r("tr",{attrs:{id:"row38857563"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p60454875"}},[r("a",{attrs:{name:"p60454875"}}),r("a",{attrs:{name:"p60454875"}}),t._v("接口3")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p65006716"}},[r("a",{attrs:{name:"p65006716"}}),r("a",{attrs:{name:"p65006716"}}),t._v("int atiny_mqtt_data_send(mqtt_client_s* phandle, const char *msg, uint32_t msg_len, mqtt_qos_e qos)")])])]),t._v(" "),r("tr",{attrs:{id:"row48189536"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p11038357"}},[r("a",{attrs:{name:"p11038357"}}),r("a",{attrs:{name:"p11038357"}}),t._v("功能")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p21691710"}},[r("a",{attrs:{name:"p21691710"}}),r("a",{attrs:{name:"p21691710"}}),t._v("发送MQTT数据，可用于数据上报或命令下发的应答，数据格式需要和IOT平台定义一致。")])])]),t._v(" "),r("tr",{attrs:{id:"row61007666"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p42673893"}},[r("a",{attrs:{name:"p42673893"}}),r("a",{attrs:{name:"p42673893"}}),t._v("入参")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p34033280"}},[r("a",{attrs:{name:"p34033280"}}),r("a",{attrs:{name:"p34033280"}}),t._v("phandle：MQTT客户端句柄。")]),t._v(" "),r("p",{attrs:{id:"p37864068"}},[r("a",{attrs:{name:"p37864068"}}),r("a",{attrs:{name:"p37864068"}}),t._v("Msg：数据的消息。")]),t._v(" "),r("p",{attrs:{id:"p5232300"}},[r("a",{attrs:{name:"p5232300"}}),r("a",{attrs:{name:"p5232300"}}),t._v("msg_len：消息长度。")]),t._v(" "),r("p",{attrs:{id:"p47090704"}},[r("a",{attrs:{name:"p47090704"}}),r("a",{attrs:{name:"p47090704"}}),t._v("Qos：发送的服务质量。")])])]),t._v(" "),r("tr",{attrs:{id:"row21163152"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p36493781"}},[r("a",{attrs:{name:"p36493781"}}),r("a",{attrs:{name:"p36493781"}}),t._v("出参")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p3206307"}},[r("a",{attrs:{name:"p3206307"}}),r("a",{attrs:{name:"p3206307"}}),t._v("无")])])]),t._v(" "),r("tr",{attrs:{id:"row28856764"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p55696553"}},[r("a",{attrs:{name:"p55696553"}}),r("a",{attrs:{name:"p55696553"}}),t._v("返回值")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p15126963"}},[r("a",{attrs:{name:"p15126963"}}),r("a",{attrs:{name:"p15126963"}}),t._v("ATINY_OK表示成功；否则错误码。")])])])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("atiny_mqtt_isconnected")])])},function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("p",[r("a",{attrs:{name:"table2362167"}}),t._v(" "),r("table",[r("tbody",[r("tr",{attrs:{id:"row50616587"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p6302871"}},[r("a",{attrs:{name:"p6302871"}}),r("a",{attrs:{name:"p6302871"}}),t._v("接口4")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p40770503"}},[r("a",{attrs:{name:"p40770503"}}),r("a",{attrs:{name:"p40770503"}}),t._v("int atiny_mqtt_isconnected(mqtt_client_s* phandle)")])])]),t._v(" "),r("tr",{attrs:{id:"row31390208"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p59578914"}},[r("a",{attrs:{name:"p59578914"}}),r("a",{attrs:{name:"p59578914"}}),t._v("功能")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p61162716"}},[r("a",{attrs:{name:"p61162716"}}),r("a",{attrs:{name:"p61162716"}}),t._v("MQTT客户端是否已经连接到服务器。")])])]),t._v(" "),r("tr",{attrs:{id:"row13593538"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p27334804"}},[r("a",{attrs:{name:"p27334804"}}),r("a",{attrs:{name:"p27334804"}}),t._v("入参")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p66635539"}},[r("a",{attrs:{name:"p66635539"}}),r("a",{attrs:{name:"p66635539"}}),t._v("phandle：MQTT客户端句柄。")])])]),t._v(" "),r("tr",{attrs:{id:"row62848942"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p57599579"}},[r("a",{attrs:{name:"p57599579"}}),r("a",{attrs:{name:"p57599579"}}),t._v("出参")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p35054312"}},[r("a",{attrs:{name:"p35054312"}}),r("a",{attrs:{name:"p35054312"}}),t._v("无")])])]),t._v(" "),r("tr",{attrs:{id:"row47053354"}},[r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p53225323"}},[r("a",{attrs:{name:"p53225323"}}),r("a",{attrs:{name:"p53225323"}}),t._v("返回值")])]),t._v(" "),r("td",{staticClass:"cellrowborder",attrs:{valign:"top",width:"50%"}},[r("p",{attrs:{id:"p16283872"}},[r("a",{attrs:{name:"p16283872"}}),r("a",{attrs:{name:"p16283872"}}),t._v("0表示未连接；否则连接。")])])])])])])}],e=r(0),i=Object(e.a)({},function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),r("p",[t._v("MQTT（MQ Telemetry Transport）是一种基于发布和订阅（publish/subscribe）的简单的、轻量级的通信协议，它应用于资源受限的设备及低带宽、高延时、不可靠的网络。MQTT3.1.1版本已成为OASIS的标准。")]),t._v(" "),r("p",[t._v("当前LiteOS MQTT的实现承载在传输层安全协议TLS之上，通信的协议层次见下图。")]),t._v(" "),t._m(2),t._v(" "),r("h2",{attrs:{id:"接入IoT平台对接模式.md"}},[t._v("接入IoT平台对接模式")]),t._v(" "),r("p",[t._v("设备使用MQTT很容易和华为OceanConnect IoT平台对接，平台目前支持两种对接模式。")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),r("h2",{attrs:{id:"特点.md"}},[t._v("特点")]),t._v(" "),r("p",[t._v("使用LiteOS端云互通MQTT组件很容易和IoT平台实现连接：")]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),r("h2",{attrs:{id:"环境准备.md"}},[t._v("环境准备")]),t._v(" "),t._m(10),t._v(" "),r("p",[t._v("在开发之前，需要提前获取如下信息：")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),r("p",[t._v("LiteOS源代码托管在GitHub，地址为"),r("a",{attrs:{href:"https://github.com/LiteOS/LiteOS",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/LiteOS/LiteOS"),r("OutboundLink")],1),t._v("。")]),t._v(" "),t._m(13),t._v(" "),r("h2",{attrs:{id:"IoT平台配置.md"}},[t._v("IoT平台配置")]),t._v(" "),r("p",[t._v("IoT平台需要有配置的MQTT设备信息，才能和设备连接。具体请参见IoT平台的操作资料。")]),t._v(" "),r("h2",{attrs:{id:"一机一密（静态连接）配置.md"}},[t._v("一机一密（静态连接）配置")]),t._v(" "),r("p",[t._v("在平台的设备注册中输入设备信息，提交后保存对应的deviceid和password。")]),t._v(" "),t._m(14),t._v(" "),r("h2",{attrs:{id:"一型一密（动态连接）配置.md"}},[t._v("一型一密（动态连接）配置")]),t._v(" "),r("p",[t._v("在产品管理中导入产品，提交后保存productid和password。")]),t._v(" "),t._m(15),t._v(" "),r("h2",{attrs:{id:"设备使用MQTT组件的适配.md"}},[t._v("设备使用MQTT组件的适配")]),t._v(" "),r("h2",{attrs:{id:"编译.md"}},[t._v("编译")]),t._v(" "),r("p",[t._v("MQTT组件依赖于cJSON、mbedtls及tcp/ip的实现。tcp/ip可使用lwip实现或者在AT模块实现。详细的编译可参考config_mqtt.mk及Makefile。")]),t._v(" "),r("p",[t._v("MQTT组件相关代码如下：")]),t._v(" "),t._m(16),t._v(" "),r("h2",{attrs:{id:"动态连接secret-info信息的存储.md"}},[t._v("动态连接secret info信息的存储")]),t._v(" "),r("p",[t._v("动态连接需要保存IoT平台分配的deviceid及password等secret info。需要使用1056字节保存该信息。该信息需要使用可擦除的不易丢失器件存储。该信息为用户的敏感信息，建议用户使用安全的加密算法如使用CBC模式的AES128算法进行加密存储，保护该信息安全。")]),t._v(" "),r("h2",{attrs:{id:"动态连接nodeid唯一性要求.md"}},[t._v("动态连接nodeid唯一性要求")]),t._v(" "),r("p",[t._v("动态连接的nodeid需要能唯一标识设备，如使用SN或者MAC地址等等。")]),t._v(" "),r("h2",{attrs:{id:"设备时间的要求.md"}},[t._v("设备时间的要求")]),t._v(" "),r("p",[t._v("若设备配置的密码校验类型为校验时间戳时，即MQTT_SIGN_TYPE_HMACSHA256_CHECK_TIME，设备时间需要和IoT平台时间同步，年月日小时应该保持一致，连接才能校验通过。")]),t._v(" "),r("p",[t._v("否则可带任意时间。")]),t._v(" "),r("h2",{attrs:{id:"设备配置参数必须和IoT平台配置一致.md"}},[t._v("设备配置参数必须和IoT平台配置一致")]),t._v(" "),r("p",[t._v("设备的连接参数、ca证书需要和IoT平台配置一致，才能连接成功。")]),t._v(" "),r("p",[t._v("数据的上报及命令下发及应答的格式需要和IoT平台配置的profile一致，才能实现数据上报及命令下发、应答。")]),t._v(" "),r("p",[t._v("静态设备平台profile的查询")]),t._v(" "),t._m(17),t._v(" "),r("p",[t._v("动态设备profile查询")]),t._v(" "),t._m(18),t._v(" "),r("p",[t._v("举例：")]),t._v(" "),r("p",[t._v("数据上报的Json格式要求为：")]),t._v(" "),t._m(19),r("p",[t._v("命令下发的Json格式要求为：")]),t._v(" "),t._m(20),r("p",[t._v("命令响应报文格式为：")]),t._v(" "),t._m(21),r("h2",{attrs:{id:"开发实例.md"}},[t._v("开发实例")]),t._v(" "),r("p",[t._v("请参考开源社区，DEMO代码路径demos/agenttiny_mqtt/agent_tiny_demo.c。")]),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31)])},s,!1,null,null,null);i.options.__file="sdk-mqtt.md";a.default=i.exports}}]);