<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>端云互通组件-MQTT 开发指南 | Huawei LiteOS | 中文网</title>
    <meta name="description" content="轻量级物联网操作系统，物的智能化使能平台">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.f1c36acb.css" as="style"><link rel="preload" href="/assets/js/app.33a5764c.js" as="script"><link rel="preload" href="/assets/js/111.faf1c6ce.js" as="script"><link rel="prefetch" href="/assets/js/2.20e64be0.js"><link rel="prefetch" href="/assets/js/3.c73c47b0.js"><link rel="prefetch" href="/assets/js/4.830424c3.js"><link rel="prefetch" href="/assets/js/5.f9800a44.js"><link rel="prefetch" href="/assets/js/6.6d4fb2db.js"><link rel="prefetch" href="/assets/js/7.e3f71e19.js"><link rel="prefetch" href="/assets/js/8.ed38826a.js"><link rel="prefetch" href="/assets/js/9.13aa0050.js"><link rel="prefetch" href="/assets/js/10.310cbd5c.js"><link rel="prefetch" href="/assets/js/11.1c27b65d.js"><link rel="prefetch" href="/assets/js/12.363ec7ed.js"><link rel="prefetch" href="/assets/js/13.c8ba8d27.js"><link rel="prefetch" href="/assets/js/14.52e6136d.js"><link rel="prefetch" href="/assets/js/15.5bc6a253.js"><link rel="prefetch" href="/assets/js/16.50d29923.js"><link rel="prefetch" href="/assets/js/17.e942ca60.js"><link rel="prefetch" href="/assets/js/18.63f827e2.js"><link rel="prefetch" href="/assets/js/19.561a06ce.js"><link rel="prefetch" href="/assets/js/20.822c89f7.js"><link rel="prefetch" href="/assets/js/21.1b737bb6.js"><link rel="prefetch" href="/assets/js/22.50784b81.js"><link rel="prefetch" href="/assets/js/23.6d3ce5bc.js"><link rel="prefetch" href="/assets/js/24.84d7b76d.js"><link rel="prefetch" href="/assets/js/25.9af98cef.js"><link rel="prefetch" href="/assets/js/26.09b076ce.js"><link rel="prefetch" href="/assets/js/27.14422ca1.js"><link rel="prefetch" href="/assets/js/28.76d0f557.js"><link rel="prefetch" href="/assets/js/29.3de41018.js"><link rel="prefetch" href="/assets/js/30.9d6b307c.js"><link rel="prefetch" href="/assets/js/31.fff19707.js"><link rel="prefetch" href="/assets/js/32.d779c224.js"><link rel="prefetch" href="/assets/js/33.e5eff646.js"><link rel="prefetch" href="/assets/js/34.c29c7bf0.js"><link rel="prefetch" href="/assets/js/35.3d453bad.js"><link rel="prefetch" href="/assets/js/36.d2a3f928.js"><link rel="prefetch" href="/assets/js/37.bab64800.js"><link rel="prefetch" href="/assets/js/38.80b00fd1.js"><link rel="prefetch" href="/assets/js/39.12b69bd3.js"><link rel="prefetch" href="/assets/js/40.8df75237.js"><link rel="prefetch" href="/assets/js/41.68b7a88d.js"><link rel="prefetch" href="/assets/js/42.9d73e1f4.js"><link rel="prefetch" href="/assets/js/43.accc44c7.js"><link rel="prefetch" href="/assets/js/44.f9c729f0.js"><link rel="prefetch" href="/assets/js/45.675d9159.js"><link rel="prefetch" href="/assets/js/46.f14efcb4.js"><link rel="prefetch" href="/assets/js/47.2a4e96c0.js"><link rel="prefetch" href="/assets/js/48.d9ed0168.js"><link rel="prefetch" href="/assets/js/49.3de65caf.js"><link rel="prefetch" href="/assets/js/50.c29ff2f9.js"><link rel="prefetch" href="/assets/js/51.e9ffed00.js"><link rel="prefetch" href="/assets/js/52.0e33188d.js"><link rel="prefetch" href="/assets/js/53.6748ca27.js"><link rel="prefetch" href="/assets/js/54.000288f1.js"><link rel="prefetch" href="/assets/js/55.8e86f10b.js"><link rel="prefetch" href="/assets/js/56.974a5063.js"><link rel="prefetch" href="/assets/js/57.8addd7b0.js"><link rel="prefetch" href="/assets/js/58.6a7d69e5.js"><link rel="prefetch" href="/assets/js/59.f920c55c.js"><link rel="prefetch" href="/assets/js/60.3e855454.js"><link rel="prefetch" href="/assets/js/61.2c67da1a.js"><link rel="prefetch" href="/assets/js/62.70c63f5c.js"><link rel="prefetch" href="/assets/js/63.f08b7541.js"><link rel="prefetch" href="/assets/js/64.4a6eb56d.js"><link rel="prefetch" href="/assets/js/65.9a9d6083.js"><link rel="prefetch" href="/assets/js/66.b4e5888f.js"><link rel="prefetch" href="/assets/js/67.cf26ea6b.js"><link rel="prefetch" href="/assets/js/68.8c8e5f15.js"><link rel="prefetch" href="/assets/js/69.ca89d6a5.js"><link rel="prefetch" href="/assets/js/70.3156a0a1.js"><link rel="prefetch" href="/assets/js/71.4ce9c97a.js"><link rel="prefetch" href="/assets/js/72.15d9939d.js"><link rel="prefetch" href="/assets/js/73.abd6ee41.js"><link rel="prefetch" href="/assets/js/74.137cf10c.js"><link rel="prefetch" href="/assets/js/75.f4fe6791.js"><link rel="prefetch" href="/assets/js/76.c805d732.js"><link rel="prefetch" href="/assets/js/77.d090efc7.js"><link rel="prefetch" href="/assets/js/78.05b90bf2.js"><link rel="prefetch" href="/assets/js/79.30077ffe.js"><link rel="prefetch" href="/assets/js/80.2e75f2d9.js"><link rel="prefetch" href="/assets/js/81.0155e2da.js"><link rel="prefetch" href="/assets/js/82.9a88acc0.js"><link rel="prefetch" href="/assets/js/83.0c1ca7e6.js"><link rel="prefetch" href="/assets/js/84.a735b6ee.js"><link rel="prefetch" href="/assets/js/85.7d237602.js"><link rel="prefetch" href="/assets/js/86.3cee3381.js"><link rel="prefetch" href="/assets/js/87.dd42373a.js"><link rel="prefetch" href="/assets/js/88.a5346047.js"><link rel="prefetch" href="/assets/js/89.ebd48bf9.js"><link rel="prefetch" href="/assets/js/90.03c0566d.js"><link rel="prefetch" href="/assets/js/91.4ea972ff.js"><link rel="prefetch" href="/assets/js/92.b9a4136c.js"><link rel="prefetch" href="/assets/js/93.0e8aa733.js"><link rel="prefetch" href="/assets/js/94.28883f14.js"><link rel="prefetch" href="/assets/js/95.8fa3c806.js"><link rel="prefetch" href="/assets/js/96.7a7d94af.js"><link rel="prefetch" href="/assets/js/97.482f7a92.js"><link rel="prefetch" href="/assets/js/98.7a77028b.js"><link rel="prefetch" href="/assets/js/99.9b8e08b3.js"><link rel="prefetch" href="/assets/js/100.b147d04f.js"><link rel="prefetch" href="/assets/js/101.cf4e724d.js"><link rel="prefetch" href="/assets/js/102.a31d0525.js"><link rel="prefetch" href="/assets/js/103.0d5bf65f.js"><link rel="prefetch" href="/assets/js/104.b6c77f30.js"><link rel="prefetch" href="/assets/js/105.81dd17e2.js"><link rel="prefetch" href="/assets/js/106.eb6d021a.js"><link rel="prefetch" href="/assets/js/107.849885a5.js"><link rel="prefetch" href="/assets/js/108.3fab7544.js"><link rel="prefetch" href="/assets/js/109.758e1008.js"><link rel="prefetch" href="/assets/js/110.98027808.js"><link rel="prefetch" href="/assets/js/112.4d566467.js"><link rel="prefetch" href="/assets/js/113.459d70fe.js"><link rel="prefetch" href="/assets/js/114.999f3f82.js"><link rel="prefetch" href="/assets/js/115.113c2659.js"><link rel="prefetch" href="/assets/js/116.8bdb9b2a.js"><link rel="prefetch" href="/assets/js/117.fa5ebe43.js"><link rel="prefetch" href="/assets/js/118.6b688361.js"><link rel="prefetch" href="/assets/js/119.51412ca6.js"><link rel="prefetch" href="/assets/js/120.faf7400d.js"><link rel="prefetch" href="/assets/js/121.f122eea3.js"><link rel="prefetch" href="/assets/js/122.8937d7a9.js"><link rel="prefetch" href="/assets/js/123.dfb67b87.js"><link rel="prefetch" href="/assets/js/124.100f9597.js"><link rel="prefetch" href="/assets/js/125.b8855529.js"><link rel="prefetch" href="/assets/js/126.77806c08.js"><link rel="prefetch" href="/assets/js/127.5c8795bd.js"><link rel="prefetch" href="/assets/js/128.a279b147.js"><link rel="prefetch" href="/assets/js/129.31709c6f.js"><link rel="prefetch" href="/assets/js/130.4debfe3e.js"><link rel="prefetch" href="/assets/js/131.c70f2dcc.js"><link rel="prefetch" href="/assets/js/132.ae62365d.js"><link rel="prefetch" href="/assets/js/133.d5aeef62.js"><link rel="prefetch" href="/assets/js/134.435a8b0d.js"><link rel="prefetch" href="/assets/js/135.4453e747.js"><link rel="prefetch" href="/assets/js/136.bff65f24.js"><link rel="prefetch" href="/assets/js/137.b917384e.js"><link rel="prefetch" href="/assets/js/138.269564e3.js"><link rel="prefetch" href="/assets/js/139.fcbad941.js"><link rel="prefetch" href="/assets/js/140.b7f0fb71.js"><link rel="prefetch" href="/assets/js/141.5a641bf8.js"><link rel="prefetch" href="/assets/js/142.ddfa8646.js"><link rel="prefetch" href="/assets/js/143.90692d4f.js"><link rel="prefetch" href="/assets/js/144.c8deac22.js"><link rel="prefetch" href="/assets/js/145.41f82b8e.js"><link rel="prefetch" href="/assets/js/146.b5cd71e3.js"><link rel="prefetch" href="/assets/js/147.f448da67.js"><link rel="prefetch" href="/assets/js/148.c6c05147.js"><link rel="prefetch" href="/assets/js/149.81667c5c.js"><link rel="prefetch" href="/assets/js/150.a446fa72.js"><link rel="prefetch" href="/assets/js/151.40c60d2e.js"><link rel="prefetch" href="/assets/js/152.34f5ee11.js"><link rel="prefetch" href="/assets/js/153.5f4fa74c.js"><link rel="prefetch" href="/assets/js/154.3f0b71da.js"><link rel="prefetch" href="/assets/js/155.5e3690e2.js"><link rel="prefetch" href="/assets/js/156.77e09f25.js"><link rel="prefetch" href="/assets/js/157.dc328abe.js"><link rel="prefetch" href="/assets/js/158.8ef504f4.js"><link rel="prefetch" href="/assets/js/159.3fdd263e.js"><link rel="prefetch" href="/assets/js/160.37baabe7.js"><link rel="prefetch" href="/assets/js/161.687575c2.js"><link rel="prefetch" href="/assets/js/162.0134b72b.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.32b4aeae.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f1c36acb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Huawei LiteOS | 中文网</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>入门</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/quick-start/intro/" class="nav-link">快速上手</a></li><li class="dropdown-subitem"><a href="/quick-start/contrb/" class="nav-link">参与贡献</a></li></ul></li><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/kernel/" class="nav-link">内核指南</a></li><li class="dropdown-subitem"><a href="/sdk/" class="nav-link router-link-active">SDK 指南</a></li></ul></li><li class="dropdown-item"><h4>高级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/porting/" class="nav-link">移植手册</a></li><li class="dropdown-subitem"><a href="http://liteos.github.io/api-reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API 参考
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">实战</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>LiteOS 动手实验室</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tutorials/kernel/" class="nav-link">玩转 LiteOS 内核教程</a></li><li class="dropdown-subitem"><a href="/tutorials/scene/" class="nav-link">LiteOS@NB-IoT 场景化样例集</a></li></ul></li><li class="dropdown-item"><h4>LiteOS 实战训练营材料</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/workshop/hangzhou/" class="nav-link">Workshop-杭州站</a></li></ul></li><li class="dropdown-item"><h4>在线精品课程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.huawei.com/ict/cn/edu-online/site-iot-nb-01" target="_blank" rel="noopener noreferrer" class="nav-link external">
  朱老师物联网大讲堂 NB-IoT 系列课程
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://developer.huawei.com/ict/cn/edu-online/site-iot-nb-002" target="_blank" rel="noopener noreferrer" class="nav-link external">
  物联网俱乐部 NB-IoT 系列课程
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://developer.huawei.com/ict/forum/forum.php?mod=forumdisplay&amp;fid=400045" target="_blank" rel="noopener noreferrer" class="nav-link external">
  论坛
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/changelog.html" class="nav-link">修订记录</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">切换语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sdk/sdk-mqtt.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/LiteOS/LiteOS_Documents" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>入门</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/quick-start/intro/" class="nav-link">快速上手</a></li><li class="dropdown-subitem"><a href="/quick-start/contrb/" class="nav-link">参与贡献</a></li></ul></li><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/kernel/" class="nav-link">内核指南</a></li><li class="dropdown-subitem"><a href="/sdk/" class="nav-link router-link-active">SDK 指南</a></li></ul></li><li class="dropdown-item"><h4>高级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/porting/" class="nav-link">移植手册</a></li><li class="dropdown-subitem"><a href="http://liteos.github.io/api-reference/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API 参考
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">实战</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>LiteOS 动手实验室</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tutorials/kernel/" class="nav-link">玩转 LiteOS 内核教程</a></li><li class="dropdown-subitem"><a href="/tutorials/scene/" class="nav-link">LiteOS@NB-IoT 场景化样例集</a></li></ul></li><li class="dropdown-item"><h4>LiteOS 实战训练营材料</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/workshop/hangzhou/" class="nav-link">Workshop-杭州站</a></li></ul></li><li class="dropdown-item"><h4>在线精品课程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://developer.huawei.com/ict/cn/edu-online/site-iot-nb-01" target="_blank" rel="noopener noreferrer" class="nav-link external">
  朱老师物联网大讲堂 NB-IoT 系列课程
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://developer.huawei.com/ict/cn/edu-online/site-iot-nb-002" target="_blank" rel="noopener noreferrer" class="nav-link external">
  物联网俱乐部 NB-IoT 系列课程
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://developer.huawei.com/ict/forum/forum.php?mod=forumdisplay&amp;fid=400045" target="_blank" rel="noopener noreferrer" class="nav-link external">
  论坛
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/changelog.html" class="nav-link">修订记录</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">切换语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sdk/sdk-mqtt.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/LiteOS/LiteOS_Documents" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>LiteOS SDK介绍</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/sdk/" class="sidebar-link">LiteOS SDK 介绍</a></li><li><a href="/sdk/sdk-terminology.html" class="sidebar-link">术语</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>端云互通</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/sdk/sdk-coap-lwm2m.html" class="sidebar-link">端云互通组件-CoAP/LwM2M开发指南</a></li><li><a href="/sdk/sdk-mqtt.html" class="active sidebar-link">端云互通组件-MQTT 开发指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sdk/sdk-mqtt.html#liteos端云互通组件-mqtt开发介绍" class="sidebar-link">LiteOS端云互通组件-MQTT开发介绍</a></li><li class="sidebar-sub-header"><a href="/sdk/sdk-mqtt.html#设备接入iot平台集成开发流程" class="sidebar-link">设备接入IoT平台集成开发流程</a></li><li class="sidebar-sub-header"><a href="/sdk/sdk-mqtt.html#api参考" class="sidebar-link">API参考</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>LPWA 增强</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/sdk/device-pnp.html" class="sidebar-link">Device PnP</a></li><li><a href="/sdk/dtls-plus.html" class="sidebar-link">DTLS+</a></li><li><a href="/sdk/difference-upgrade.html" class="sidebar-link">差分升级</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="端云互通组件-mqtt-开发指南"><a href="#端云互通组件-mqtt-开发指南" aria-hidden="true" class="header-anchor">#</a> 端云互通组件-MQTT 开发指南</h1> <h2 id="liteos端云互通组件-mqtt开发介绍"><a href="#liteos端云互通组件-mqtt开发介绍" aria-hidden="true" class="header-anchor">#</a> LiteOS端云互通组件-MQTT开发介绍</h2> <p>MQTT（MQ Telemetry Transport）是一种基于发布和订阅（publish/subscribe）的简单的、轻量级的通信协议，它应用于资源受限的设备及低带宽、高延时、不可靠的网络。MQTT3.1.1版本已成为OASIS的标准。</p> <p>当前LiteOS MQTT的实现承载在传输层安全协议TLS之上，通信的协议层次见下图。</p> <p><img src="data:image/png;base64,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" alt></p> <h2 id="接入IoT平台对接模式.md">接入IoT平台对接模式</h2> <p>设备使用MQTT很容易和华为OceanConnect IoT平台对接，平台目前支持两种对接模式。</p> <p><strong>一机一密模式</strong>，即一个设备在平台申请一个密码，流程图如下所示：</p> <p><img src="/assets/img/zh-cn_image_0150525918.340494e6.png" alt></p> <p><strong>一型一密模式</strong>，即一种产品在平台申请一个密码，产品的设备唯一标识nodeid由设备厂家分配，设备的密码由设备和平台动态协商，流程图如下所示：</p> <p><img src="/assets/img/zh-cn_image_0150525920.f9016bab.png" alt></p> <h2 id="特点.md">特点</h2> <p>使用LiteOS端云互通MQTT组件很容易和IoT平台实现连接：</p> <ol><li>支持一机一密即静态连接，及一型一密即动态连接。</li> <li>支持数据上报到IoT平台。</li> <li>支持接收执行IoT平台命令。</li></ol> <p><img src="/assets/img/zh-cn_image_0150516759.55170d23.png" alt></p> <h2 id="设备接入iot平台集成开发流程"><a href="#设备接入iot平台集成开发流程" aria-hidden="true" class="header-anchor">#</a> 设备接入IoT平台集成开发流程</h2> <h2 id="环境准备.md">环境准备</h2> <p><strong>平台侧环境准备</strong></p> <p>在开发之前，需要提前获取如下信息：</p> <ul><li>开发者Portal的访问地址/账号/密码，需要向OceanConnect IoT平台申请</li> <li>设备对接地址/端口号</li></ul> <p><strong>端侧环境准备</strong>：</p> <p>LiteOS源代码托管在GitHub，地址为<a href="https://github.com/LiteOS/LiteOS" target="_blank" rel="noopener noreferrer">https://github.com/LiteOS/LiteOS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <ul><li>集成开发工具:
<ul><li>MDK 5.18版本或者以上版本，从MDK官方网站下载。</li> <li>MDK依赖的pack包</li></ul></li></ul> <h2 id="IoT平台配置.md">IoT平台配置</h2> <p>IoT平台需要有配置的MQTT设备信息，才能和设备连接。具体请参见IoT平台的操作资料。</p> <h2 id="一机一密（静态连接）配置.md">一机一密（静态连接）配置</h2> <p>在平台的设备注册中输入设备信息，提交后保存对应的deviceid和password。</p> <p><img src="/assets/img/zh-cn_image_0150495735.a34302bb.png" alt></p> <h2 id="一型一密（动态连接）配置.md">一型一密（动态连接）配置</h2> <p>在产品管理中导入产品，提交后保存productid和password。</p> <p><img src="/assets/img/zh-cn_image_0150495737.0ccf9e92.png" alt></p> <h2 id="设备使用MQTT组件的适配.md">设备使用MQTT组件的适配</h2> <h2 id="编译.md">编译</h2> <p>MQTT组件依赖于cJSON、mbedtls及tcp/ip的实现。tcp/ip可使用lwip实现或者在AT模块实现。详细的编译可参考config_mqtt.mk及Makefile。</p> <p>MQTT组件相关代码如下：</p> <p><a name="table48398424"></a> <table><tbody><tr id="row57801875"><td valign="top" width="38.48%" class="cellrowborder"><p id="p51440330"><a name="p51440330"></a><a name="p51440330"></a>目录</p></td> <td valign="top" width="61.519999999999996%" class="cellrowborder"><p id="p5917164"><a name="p5917164"></a><a name="p5917164"></a>描述</p></td></tr> <tr id="row53254482"><td valign="top" width="38.48%" class="cellrowborder"><p id="p18645762"><a name="p18645762"></a><a name="p18645762"></a>components/connectivity/mqtt</p></td> <td valign="top" width="61.519999999999996%" class="cellrowborder"><p id="p33911763"><a name="p33911763"></a><a name="p33911763"></a>paho.mqtt.enbedded-c开源组件及适配</p></td></tr> <tr id="row36770415"><td valign="top" width="38.48%" class="cellrowborder"><p id="p25613652"><a name="p25613652"></a><a name="p25613652"></a>components/connectivity/agent_tiny/atiny_mqtt</p></td> <td valign="top" width="61.519999999999996%" class="cellrowborder"><p id="p61439917"><a name="p61439917"></a><a name="p61439917"></a>对接IoT平台的实现</p></td></tr></tbody></table></p> <h2 id="动态连接secret-info信息的存储.md">动态连接secret info信息的存储</h2> <p>动态连接需要保存IoT平台分配的deviceid及password等secret info。需要使用1056字节保存该信息。该信息需要使用可擦除的不易丢失器件存储。该信息为用户的敏感信息，建议用户使用安全的加密算法如使用CBC模式的AES128算法进行加密存储，保护该信息安全。</p> <h2 id="动态连接nodeid唯一性要求.md">动态连接nodeid唯一性要求</h2> <p>动态连接的nodeid需要能唯一标识设备，如使用SN或者MAC地址等等。</p> <h2 id="设备时间的要求.md">设备时间的要求</h2> <p>若设备配置的密码校验类型为校验时间戳时，即MQTT_SIGN_TYPE_HMACSHA256_CHECK_TIME，设备时间需要和IoT平台时间同步，年月日小时应该保持一致，连接才能校验通过。</p> <p>否则可带任意时间。</p> <h2 id="设备配置参数必须和IoT平台配置一致.md">设备配置参数必须和IoT平台配置一致</h2> <p>设备的连接参数、ca证书需要和IoT平台配置一致，才能连接成功。</p> <p>数据的上报及命令下发及应答的格式需要和IoT平台配置的profile一致，才能实现数据上报及命令下发、应答。</p> <p>静态设备平台profile的查询</p> <p><img src="/assets/img/zh-cn_image_0150495739.31f28552.png" alt></p> <p>动态设备profile查询</p> <p><img src="/assets/img/zh-cn_image_0150495741.c2af6b73.png" alt></p> <p>举例：</p> <p>数据上报的Json格式要求为：</p> <div class="language- extra-class"><pre class="language-text"><code>{
&quot;msgType&quot;:      &quot;deviceReq&quot;,
&quot;hasMore&quot;:      0,
&quot;data&quot;: [{
&quot;serviceId&quot;:    &quot;serviceIdValue&quot;,
&quot;data&quot;: {
&quot;defineData&quot;: &quot;defineValue&quot;
},
&quot;eventTime&quot;:    &quot;20161219T114920Z&quot;
}]
}
</code></pre></div><p>命令下发的Json格式要求为：</p> <div class="language- extra-class"><pre class="language-text"><code>{
&quot;msgType&quot;:&quot;cloudReq&quot;,
&quot;serviceId&quot;:&quot;serviceIdValue&quot;,
&quot;paras&quot;:{
&quot;paraName&quot;:&quot;paraValue&quot;
},
&quot;cmd&quot;:&quot;cmdValue&quot;,
&quot;hasMore&quot;:0,
&quot;mid&quot;:0
}
</code></pre></div><p>命令响应报文格式为：</p> <div class="language- extra-class"><pre class="language-text"><code>{
&quot;msgType&quot;:&quot;deviceRsp&quot;,
&quot;mid&quot;:0,
&quot;errcode&quot;:0,
&quot;hasMore&quot;:0,
&quot;body&quot;:{
&quot;bodyParaName&quot;:&quot;bodyParaValue&quot;
}
}
</code></pre></div><h2 id="开发实例.md">开发实例</h2> <p>请参考开源社区，DEMO代码路径demos/agenttiny_mqtt/agent_tiny_demo.c。</p> <blockquote><p><img src="data:image/gif;base64,R0lGODlhGwAWAKUAAPz+/Nze3LS2tHx+fFxaXGRiZERCRBwaHDw6PMTGxAQGBDQ2NKSmpJyenLy+vOTm5HRydDQyNAQCBCwuLCQiJKyurExKTBQSFGRmZFRSVBweHIyKjFxeXNTS1ERGRIyOjOzu7PT29Hx6fCQmJBQWFJSWlAwKDISGhMzOzNTW1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAAALAAAAAAbABYAAAanQIBwSCwaj8ikcslsOpEQiVRiOgFQlKkEkUqCJgViSDQyBIgJUglJ4QyMh45R4/kcJYN3kXLeb8JGeHpEfEYUf3d5hn2EiIGKe4xDh4BFgouGjpaQhJJClImDk54AoI+in6SmmxgDBQYZAwIaG3l5DAGrRBITFAMNDhUDFhcEtgMEFAoYlUQKCwMMDbYODwnTxxARzUMBAsgFtgYHCOHHrwlP6uvs7UEAOw==" alt> <strong>说明：</strong><br>
Huawei LiteOS开源社区地址：https://github.com/LiteOS/LiteOS。</p></blockquote> <h2 id="api参考"><a href="#api参考" aria-hidden="true" class="header-anchor">#</a> API参考</h2> <p><strong>atiny_mqtt_init</strong></p> <p><a name="table62894494"></a> <table><tbody><tr id="row18996311"><td valign="top" width="50%" class="cellrowborder"><p id="p62306224"><a name="p62306224"></a><a name="p62306224"></a>接口1</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p13639418"><a name="p13639418"></a><a name="p13639418"></a>int  atiny_mqtt_init(const mqtt_param_s* atiny_params, mqtt_client_s** phandle)</p></td></tr> <tr id="row55645905"><td valign="top" width="50%" class="cellrowborder"><p id="p11024455"><a name="p11024455"></a><a name="p11024455"></a>功能</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p20565633"><a name="p20565633"></a><a name="p20565633"></a>初始化MQTT模块，配置必备信息。</p></td></tr> <tr id="row50872971"><td valign="top" width="50%" class="cellrowborder"><p id="p27069991"><a name="p27069991"></a><a name="p27069991"></a>入参</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p45185659"><a name="p45185659"></a><a name="p45185659"></a>atiny_params：MQTT服务器信息、传输层安全信息、用户交互命令钩子。</p></td></tr> <tr id="row4017754"><td valign="top" width="50%" class="cellrowborder"><p id="p57002678"><a name="p57002678"></a><a name="p57002678"></a>出参</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p53814239"><a name="p53814239"></a><a name="p53814239"></a>Phandle：MQTT客户端句柄。</p></td></tr> <tr id="row14566108"><td valign="top" width="50%" class="cellrowborder"><p id="p39004066"><a name="p39004066"></a><a name="p39004066"></a>返回值</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p5212777"><a name="p5212777"></a><a name="p5212777"></a>ATINY_OK表示成功；否则错误码。</p></td></tr></tbody></table></p> <p><strong>atiny_mqtt_bind</strong></p> <p><a name="table61289235"></a> <table><tbody><tr id="row29724369"><td valign="top" width="50%" class="cellrowborder"><p id="p58863658"><a name="p58863658"></a><a name="p58863658"></a>接口2</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p3226955"><a name="p3226955"></a><a name="p3226955"></a>int atiny_mqtt_bind(const mqtt_device_info_s* device_info, mqtt_client_s* phandle)</p></td></tr> <tr id="row29042598"><td valign="top" width="50%" class="cellrowborder"><p id="p3640263"><a name="p3640263"></a><a name="p3640263"></a>功能</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p26425925"><a name="p26425925"></a><a name="p26425925"></a>绑定MQTT设备，并占用该任务一直运行。</p></td></tr> <tr id="row36506738"><td valign="top" width="50%" class="cellrowborder"><p id="p4255814"><a name="p4255814"></a><a name="p4255814"></a>入参</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p9176617"><a name="p9176617"></a><a name="p9176617"></a>device_info：设备配置参数，即静态、动态连接相关参数，连接校验方式，编码方式。</p></td></tr> <tr id="row15480697"><td valign="top" width="50%" class="cellrowborder"><p id="p45976953"><a name="p45976953"></a><a name="p45976953"></a>出参</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p33145693"><a name="p33145693"></a><a name="p33145693"></a>phandle：MQTT客户端句柄。</p></td></tr> <tr id="row29875784"><td valign="top" width="50%" class="cellrowborder"><p id="p4019454"><a name="p4019454"></a><a name="p4019454"></a>返回值</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p57140364"><a name="p57140364"></a><a name="p57140364"></a>返回错误码或者不返回。</p></td></tr></tbody></table></p> <p><strong>atiny_mqtt_data_send</strong></p> <p><a name="table65481017"></a> <table><tbody><tr id="row38857563"><td valign="top" width="50%" class="cellrowborder"><p id="p60454875"><a name="p60454875"></a><a name="p60454875"></a>接口3</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p65006716"><a name="p65006716"></a><a name="p65006716"></a>int atiny_mqtt_data_send(mqtt_client_s* phandle, const char *msg, uint32_t msg_len, mqtt_qos_e qos)</p></td></tr> <tr id="row48189536"><td valign="top" width="50%" class="cellrowborder"><p id="p11038357"><a name="p11038357"></a><a name="p11038357"></a>功能</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p21691710"><a name="p21691710"></a><a name="p21691710"></a>发送MQTT数据，可用于数据上报或命令下发的应答，数据格式需要和IOT平台定义一致。</p></td></tr> <tr id="row61007666"><td valign="top" width="50%" class="cellrowborder"><p id="p42673893"><a name="p42673893"></a><a name="p42673893"></a>入参</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p34033280"><a name="p34033280"></a><a name="p34033280"></a>phandle：MQTT客户端句柄。</p> <p id="p37864068"><a name="p37864068"></a><a name="p37864068"></a>Msg：数据的消息。</p> <p id="p5232300"><a name="p5232300"></a><a name="p5232300"></a>msg_len：消息长度。</p> <p id="p47090704"><a name="p47090704"></a><a name="p47090704"></a>Qos：发送的服务质量。</p></td></tr> <tr id="row21163152"><td valign="top" width="50%" class="cellrowborder"><p id="p36493781"><a name="p36493781"></a><a name="p36493781"></a>出参</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p3206307"><a name="p3206307"></a><a name="p3206307"></a>无</p></td></tr> <tr id="row28856764"><td valign="top" width="50%" class="cellrowborder"><p id="p55696553"><a name="p55696553"></a><a name="p55696553"></a>返回值</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p15126963"><a name="p15126963"></a><a name="p15126963"></a>ATINY_OK表示成功；否则错误码。</p></td></tr></tbody></table></p> <p><strong>atiny_mqtt_isconnected</strong></p> <p><a name="table2362167"></a> <table><tbody><tr id="row50616587"><td valign="top" width="50%" class="cellrowborder"><p id="p6302871"><a name="p6302871"></a><a name="p6302871"></a>接口4</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p40770503"><a name="p40770503"></a><a name="p40770503"></a>int atiny_mqtt_isconnected(mqtt_client_s* phandle)</p></td></tr> <tr id="row31390208"><td valign="top" width="50%" class="cellrowborder"><p id="p59578914"><a name="p59578914"></a><a name="p59578914"></a>功能</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p61162716"><a name="p61162716"></a><a name="p61162716"></a>MQTT客户端是否已经连接到服务器。</p></td></tr> <tr id="row13593538"><td valign="top" width="50%" class="cellrowborder"><p id="p27334804"><a name="p27334804"></a><a name="p27334804"></a>入参</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p66635539"><a name="p66635539"></a><a name="p66635539"></a>phandle：MQTT客户端句柄。</p></td></tr> <tr id="row62848942"><td valign="top" width="50%" class="cellrowborder"><p id="p57599579"><a name="p57599579"></a><a name="p57599579"></a>出参</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p35054312"><a name="p35054312"></a><a name="p35054312"></a>无</p></td></tr> <tr id="row47053354"><td valign="top" width="50%" class="cellrowborder"><p id="p53225323"><a name="p53225323"></a><a name="p53225323"></a>返回值</p></td> <td valign="top" width="50%" class="cellrowborder"><p id="p16283872"><a name="p16283872"></a><a name="p16283872"></a>0表示未连接；否则连接。</p></td></tr></tbody></table></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/LiteOS/LiteOS_Documents/edit/master/docs/sdk/sdk-mqtt.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/sdk/sdk-coap-lwm2m.html" class="prev">
          端云互通组件-CoAP/LwM2M开发指南
        </a></span> <span class="next"><a href="/sdk/device-pnp.html">
          Device PnP
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/111.faf1c6ce.js" defer></script><script src="/assets/js/app.33a5764c.js" defer></script>
  </body>
</html>
